#:import to_rgba kivy.utils.get_color_from_hex


<MainMenu>:
    canvas.before:
        Color:
            rgba: to_rgba("F5F5F5")
        Rectangle:
            # self here refers to the widget i.e BoxLayout
            pos: self.pos
            size: self.size

    GridLayout:
        rows: 2

        BoxLayout:
            orientation: "vertical"
            Label:

            Image:
                source: "data/icons/submit.gif"

            Label:
                text: "Mafia"
                color: to_rgba("212121")

        BoxLayout:
            orientation: "horizontal"
            cols: 3

            Label:

            GridLayout:
                rows: 4
                row_force_default: True
                row_default_height: 50
                spacing: [10, 10]

                Label:

                Button:
                    text: "Start"
                    on_press: root.manager.current = "discussion"

                Button:
                    text: "Settings"
                    on_press: app.open_settings()

                Button:
                    text: "Exit"
                    on_press: exit()

            Label:


<Discussion>:
    AnchorLayout:
        canvas.before:
            Color:
                rgba: to_rgba("F5F5F5")
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            id: submit_button
            pos: [root.center_x - self.width/2, root.center_y - self.height/2]
            source: "data/icons/submit_complete.png"
            on_press: root.submit()
            size_hint: .2, .2
#            borders: 2, "solid", to_rgba("05F5F5")

        CircularLayout:
            pos: [i - j/2 for i, j in zip(root.center, self.size)]
            id: circular_layout
            direction: "cw"
            start_angle: -180/len(self.children)-90 if len(self.children) else 0
            inner_radius_hint: 0.7
            outer_radius_hint: 1.2
            size_hint_y: 0.7


<Trial>:
    AnchorLayout:
        selected_player: None
        canvas.before:
            Color:
                rgba: to_rgba("F44336")
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            id: submit_button
            source: "data/icons/submit_complete.png"
            on_press: root.submit()
            size_hint: .2, .2
            #borders: 2, "solid", to_rgba("FF9800")

        CircularLayout:
            id: circular_layout
            direction: "cw"
            start_angle: -180/len(self.children)-90 if len(self.children) else 0
            inner_radius_hint: 0.7
            outer_radius_hint: 1.2
            size_hint_y: 0.7


<Night>:
    AnchorLayout:
        players: {}
        selected_player: None
        canvas.before:
            Color:
                rgba: to_rgba("2196F3")
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            id: submit_button
            source: "data/icons/submit_complete.png"
            on_press:
                root.submit()
            size_hint: .2, .2
            #borders: 2, "solid", to_rgba("05F5F5")

        CircularLayout:
            id: circular_layout
            direction: "cw"
            start_angle: -180/len(self.children)-90 if len(self.children) else 0
            inner_radius_hint: 0.7
            outer_radius_hint: 1.2
            size_hint_y: 0.7


<GameOverMenu>:
    canvas.before:
        Color:
            rgba: to_rgba("F5F5F5")
        Rectangle:
            # self here refers to the widget i.e BoxLayout
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            orientation: "vertical"

            Label:

            ImageButton:
                source: "data/icons/player_alive.png"
                on_press:
                    if self.source == "data/icons/player_alive.png": self.source = "data/icons/player_alive_old.png"
                    else: self.source = "data/icons/player_alive.png"
            Label:
                color: to_rgba("212121")
                markup: True
                text: "[b]Game Over![/b]"

        BoxLayout:
            orientation: "horizontal"
            cols: 3

            Label:

            GridLayout:
                rows: 4
                row_force_default: True
                row_default_height: 50
                spacing: [10, 10]

                Label:

                Button:
                    text: "Restart"
                    on_press: root.manager.current = "discussion"

                Button:
                    text: "Main Menu"
                    on_press: root.manager.current = "mainmenu"

                Button:
                    text: "Exit"
                    on_press: exit()

            Label:


<LoadingScreen>:
    canvas.before:
        Color:
            rgba: to_rgba("F5F5F5")
        Rectangle:
            # self here refers to the widget i.e BoxLayout
            pos: self.pos
            size: self.size

    BoxLayout:
        Label:
            color: to_rgba("212121")
            text: "Loading..."
